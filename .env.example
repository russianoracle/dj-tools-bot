# Mood Classifier Configuration
# Copy this file to .env and configure for your environment

# ============== Data Persistence ==============
# Directory for persistent data (database, cache)
# CRITICAL: Set this in production to separate data from code
# Default (local dev): ./cache/
# Production: /data/ (mounted volume)
# DATA_DIR=/data

# ============== Telegram Bot (Optional) ==============
# TELEGRAM_BOT_TOKEN=your_bot_token_here
# TELEGRAM_ALLOWED_USERS=123456789,987654321

# ============== Redis/ARQ (Optional) ==============
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_DB=0
# ARQ_MAX_JOBS=2  # Max concurrent analysis tasks in worker
# ARQ_MAX_TRIES=1  # ARQ auto-retry failed tasks (1=no retry, 2=one retry, etc.)

# ============== Download Retry Policy ==============
# Configure retry behavior for audio downloads (yt-dlp)
# DOWNLOAD_MAX_RETRIES=5        # Max retry attempts (outer retry loop)
# DOWNLOAD_BACKOFF_BASE=2       # Exponential backoff base (2^attempt)
# DOWNLOAD_BACKOFF_MAX=30       # Max backoff delay in seconds (cap)
# YTDLP_RETRIES=5              # yt-dlp internal retries (HTTP 4xx/5xx errors)
# YTDLP_FRAGMENT_RETRIES=5     # yt-dlp fragment retries (HLS/DASH streams)
#
# Examples:
#   BASE=2, MAX=30 → delays: 2s, 4s, 8s, 16s, 30s (default, balanced)
#   BASE=3, MAX=60 → delays: 3s, 9s, 27s, 60s (aggressive retry)
#   BASE=1.5, MAX=10 → delays: 1.5s, 2.25s, 3.37s, 5s, 7.5s, 10s (gentle)
#
# Total max attempts = DOWNLOAD_MAX_RETRIES × YTDLP_RETRIES × YTDLP_FRAGMENT_RETRIES
#   Default: 5 × 5 × 5 = 125 attempts per fragment (very resilient)

# ============== yt-dlp Proxy (for geo-blocked services) ==============
# HTTP/SOCKS proxy for downloading from SoundCloud/YouTube
# YTDLP_PROXY=socks5://proxy.example.com:1080

# ============== Training Mode (Local Only) ==============
# Enable training features (requires requirements-training.txt)
# TRAINING_MODE=1

# ============== Rekordbox Integration (Local Only) ==============
# Required for local Rekordbox database access
# Get key from: https://github.com/dylanljones/pyrekordbox/discussions/97
# Not needed on production (uses cached metadata)
# RB6_DB_KEY=your_rekordbox_6_database_key

# ============== Yandex Cloud ==============
# Lockbox secret ID (for production secrets management)
# Secrets are automatically loaded via scripts/fetch-secrets.sh
YC_LOCKBOX_SECRET_ID=e6qrhl953e11s6flf61n
YC_SERVICE_ACCOUNT_ID=aje6e9iq034u4cvf3cpp

# Folder ID for Yandex Cloud resources
# YC_FOLDER_ID=b1g9a77bmpk1llb76sab

# Log Group ID (create in YC Console -> Logging)
# REQUIRED for cloud logging
YC_LOG_GROUP_ID=your_log_group_id_here

# IAM token (auto-generated by scripts/refresh-iam-token.sh, expires in 12h)
# YC_IAM_TOKEN=auto_generated

# Service Account key file path (for local development)
# YC_SA_KEY_FILE=/path/to/sa-key.json

# Logging configuration
# LOG_LEVEL=INFO
# LOG_FILE=/var/log/mood-classifier/app.log
# LOG_JSON_FORMAT=true
