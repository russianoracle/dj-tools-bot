# Training Roadmap: DEAM ‚Üí DJ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏—á–∏

## –û–±—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

–î–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ:
1. **–≠—Ç–∞–ø 1**: –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –Ω–∞ DEAM (–±–∞–∑–æ–≤—ã–µ audio —Ñ–∏—á–∏ + arousal-valence –ø–æ–Ω–∏–º–∞–Ω–∏–µ)
2. **–≠—Ç–∞–ø 2**: –£—Ç–æ—á–Ω–µ–Ω–∏–µ —Å DJ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ —Ñ–∏—á–∞–º–∏ (build-up, drops, climax detection)

---

## –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –Ω–∞ DEAM –¥–∞—Ç–∞—Å–µ—Ç–µ

### –¶–µ–ª—å
–û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å –Ω–∞ 1,802 —Ç—Ä–µ–∫–∞—Ö DEAM —Å –±–∞–∑–æ–≤—ã–º–∏ audio —Ñ–∏—á–∞–º–∏ (16 —Ñ–∏—á–µ–π).

### –§–∏—á–∏ (16 –±–∞–∑–æ–≤—ã—Ö)
- Tempo (BPM) - –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- Zero-crossing rate
- Low energy
- RMS energy
- Spectral rolloff
- Brightness
- Spectral centroid
- Energy variance
- Drop intensity
- MFCC 1-5 (mean + std, 10 —Ñ–∏—á–µ–π)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ –∑–æ–Ω

**–í–ê–ñ–ù–û**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ä–æ–≥–∞–º–∏ arousal ‚Üí –∑–æ–Ω—ã.

–ü–æ—Ä–æ–≥–∏ –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
```bash
python scripts/prepare_deam_dataset.py \
  --yellow-threshold 4.0 \  # arousal < 4.0 ‚Üí YELLOW
  --purple-threshold 6.0    # arousal > 6.0 ‚Üí PURPLE
```

**–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–µ—Å–µ—Ç—ã** (—Å–º. config/zone_mapping.yaml):
- `conservative` (3.5 / 6.5) - —É–∑–∫–∏–µ –∑–æ–Ω—ã, –±–æ–ª—å—à–µ GREEN
- `balanced` (4.0 / 6.0) - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- `aggressive` (4.5 / 5.5) - —à–∏—Ä–æ–∫–∏–µ –∑–æ–Ω—ã, –º–µ–Ω—å—à–µ GREEN
- `dj_focused` (3.8 / 6.2) - —á—ë—Ç–∫–∏–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –∑–æ–Ω—ã –¥–ª—è DJ

### Pipeline –æ–±—É—á–µ–Ω–∏—è

#### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ tempo (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–µ–π—á–∞—Å)
```bash
# –ó–∞–ø—É—â–µ–Ω–æ –≤ —Ñ–æ–Ω–µ, ~60 –º–∏–Ω—É—Ç
python scripts/extract_deam_tempo.py \
  --audio-dir dataset/MEMD_audio \
  --output dataset/deam_tempo.csv
```

**–°—Ç–∞—Ç—É—Å**: –í –ø—Ä–æ—Ü–µ—Å—Å–µ
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: dataset/deam_tempo.csv —Å tempo –¥–ª—è 1,802 —Ç—Ä–µ–∫–æ–≤
**–¢–æ—á–Ω–æ—Å—Ç—å**: ¬±0-2 BPM –Ω–∞ —Ä–∏—Ç–º–∏—á–Ω—ã—Ö —Ç—Ä–µ–∫–∞—Ö (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤—Ä—É—á–Ω—É—é)

#### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
```bash
python scripts/prepare_deam_dataset.py \
  --tempo-csv dataset/deam_tempo.csv \
  --yellow-threshold 4.0 \
  --purple-threshold 6.0 \
  --output-dir dataset/deam_processed \
  --test-size 0.1 \
  --val-size 0.1
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- `dataset/deam_processed/train.csv` (~1,440 —Ç—Ä–µ–∫–æ–≤, 80%)
- `dataset/deam_processed/val.csv` (~180 —Ç—Ä–µ–∫–æ–≤, 10%)
- `dataset/deam_processed/test.csv` (~180 —Ç—Ä–µ–∫–æ–≤, 10%)
- `dataset/deam_processed/metadata.json` (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

**–í–∞–∂–Ω–æ**: –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–æ–Ω. –ï—Å–ª–∏ –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ thresholds.

#### 3. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```bash
python scripts/train_on_deam.py \
  --deam-dir dataset/deam_processed \
  --algorithm ensemble \
  --epochs 100 \
  --batch-size 32 \
  --model-dir models/deam_baseline
```

**–ê–ª–≥–æ—Ä–∏—Ç–º—ã**:
- `xgboost` - –±—ã—Å—Ç—Ä—ã–π, —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–∞–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `neural` - –Ω–µ–π—Ä–æ—Å–µ—Ç—å, –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- `ensemble` - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è XGBoost + Neural (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- –ú–æ–¥–µ–ª—å –≤ `models/deam_baseline/`
- –ú–µ—Ç—Ä–∏–∫–∏: accuracy, confusion matrix, classification report
- –û–∂–∏–¥–∞–µ–º–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å: >80% (–≤—ã—à–µ —Ç–µ–∫—É—â–∏—Ö 52%)

---

## –≠—Ç–∞–ø 2: DJ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏—á–∏

### –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏—á–∏, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è DJ-—Ç—Ä–µ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ DEAM.

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ DJ-—Ñ–∏—á–∏ (13 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö)

#### Build-up detection (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è GREEN –∑–æ–Ω—ã)
- `energy_slope` - –Ω–∞–∫–ª–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏ (regression –Ω–∞ —ç–Ω–µ—Ä–≥–∏—é –≤–æ –≤—Ä–µ–º–µ–Ω–∏)
- `energy_buildup_ratio` - –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–∞—Å—Ç—É—â–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —ç–Ω–µ—Ä–≥–∏–∏
- `onset_acceleration` - —É—Å–∫–æ—Ä–µ–Ω–∏–µ onset strength

#### Drive enhancement (–¥–ª—è PURPLE –∑–æ–Ω—ã)
- `drop_frequency` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä–æ–ø–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- `peak_energy_ratio` - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–∏–∫–æ–≤–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –∫ —Å—Ä–µ–¥–Ω–µ–π

#### Euphoria indicators (–¥–ª—è PURPLE –∑–æ–Ω—ã)
- `rhythmic_regularity` - —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∏—Ç–º–∞ (0-1)
- `harmonic_complexity` - –≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å (entropy)

#### Climax structure detection
- `has_climax` - –±–∏–Ω–∞—Ä–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–ª–∏—á–∏—è –∫—É–ª—å–º–∏–Ω–∞—Ü–∏–∏
- `climax_position` - –ø–æ–∑–∏—Ü–∏—è –∫—É–ª—å–º–∏–Ω–∞—Ü–∏–∏ –≤ —Ç—Ä–µ–∫–µ (0-1)
- `dynamic_range` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω (dB)

#### HPSS features
- `harmonic_ratio` - –¥–æ–ª—è –≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `percussive_ratio` - –¥–æ–ª—è –ø–µ—Ä–∫—É—Å—Å–∏–æ–Ω–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### TODO: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 1. –°–æ–∑–¥–∞—Ç—å DJ feature extractor
```python
# scripts/extract_dj_features.py
# –ò–∑–≤–ª–µ–∫–∞–µ—Ç 13 DJ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ–∏—á–µ–π –¥–ª—è DEAM —Ç—Ä–µ–∫–æ–≤
```

#### 2. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ñ–∏—á–∏
```python
# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å:
# - 16 –±–∞–∑–æ–≤—ã—Ö —Ñ–∏—á–µ–π –∏–∑ DEAM
# - 13 DJ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ–∏—á–µ–π
# = 29 —Ñ–∏—á–µ–π total
```

#### 3. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å
```bash
python scripts/train_on_deam.py \
  --deam-dir dataset/deam_processed_with_dj_features \
  --algorithm ensemble \
  --use-dj-features
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: accuracy >85% (—É–ª—É—á—à–µ–Ω–∏–µ –∑–∞ —Å—á—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤)

---

## –≠—Ç–∞–ø 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Ç—Ä–µ–∫–∞–º

### 1. –ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å arousal-valence –¥–ª—è 415 —Ç—Ä–µ–∫–æ–≤
```bash
# TODO: –°–æ–∑–¥–∞—Ç—å arousal-valence —Ä–µ–≥—Ä–µ—Å—Å–æ—Ä
python scripts/predict_arousal_valence.py \
  --model models/deam_baseline/arousal_valence_regressor.pkl \
  --tracks-dir /path/to/user/tracks \
  --output results/user_tracks_arousal_valence.csv
```

### 2. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
```bash
# TODO: –°–æ–∑–¥–∞—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä
python scripts/visualize_arousal_valence.py \
  --deam-data dataset/deam_processed/deam_complete.csv \
  --user-data results/user_tracks_arousal_valence.csv \
  --output results/arousal_valence_distribution.png
```

**–¶–µ–ª—å**: –£–≤–∏–¥–µ—Ç—å, –∫–∞–∫ 415 —Ç—Ä–µ–∫–æ–≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ arousal-valence –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ DEAM.

### 3. –§–∏–Ω–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å
```bash
# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å:
# - 1,802 DEAM —Ç—Ä–µ–∫–æ–≤ (—Å arousal-valence —Ä–∞–∑–º–µ—Ç–∫–æ–π)
# - 415 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç—Ä–µ–∫–æ–≤ (—Å predicted arousal-valence)
# = 2,217 —Ç—Ä–µ–∫–æ–≤ total

python scripts/train_final_model.py \
  --deam-data dataset/deam_processed_with_dj_features \
  --user-data results/user_tracks_with_dj_features.csv \
  --output models/final_zone_classifier
```

---

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
1. DEAMLoader –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–¥—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö —Ñ–∏—á–µ–π
2. –°–∫—Ä–∏–ø—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è tempo (extract_deam_tempo.py)
3. –°–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ (prepare_deam_dataset.py)
4. DEAMZoneTrainer –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –Ω–∞ DEAM
5. –°–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è (train_on_deam.py)
6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–æ–Ω–∞–º–∏ (zone_mapping.yaml)

### ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ tempo –¥–ª—è 1,802 —Ç—Ä–µ–∫–æ–≤ (~60 –º–∏–Ω—É—Ç)

### üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
1. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è tempo extraction
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞—Ç–∞—Å–µ—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ –∑–æ–Ω
3. –û–±—É—á–∏—Ç—å –±–∞–∑–æ–≤—É—é –º–æ–¥–µ–ª—å –Ω–∞ DEAM (–≠—Ç–∞–ø 1)
4. –°–æ–∑–¥–∞—Ç—å —ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä DJ-—Ñ–∏—á–µ–π (–≠—Ç–∞–ø 2)
5. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ñ–∏—á–µ–π

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- BPM accuracy: ¬±0-2 BPM –Ω–∞ —Ä–∏—Ç–º–∏—á–Ω—ã—Ö —Ç—Ä–µ–∫–∞—Ö
- –¢—Ä–µ–∫–∏ –±–µ–∑ —Ä–∏—Ç–º–∞ (ambient/vocal): ~2-3% –¥–∞—Ç–∞—Å–µ—Ç–∞
- DEAM features: 260 OpenSMILE —Ñ–∏—á–µ–π ‚Üí 15 –±–∞–∑–æ–≤—ã—Ö + 1 tempo

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç arousal ‚Üí zone mapping —á–µ—Ä–µ–∑:
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (--yellow-threshold, --purple-threshold)
- –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–µ—Å–µ—Ç—ã –≤ config/zone_mapping.yaml
- –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥–±–æ—Ä —á–µ—Ä–µ–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **Baseline (—Å–µ–π—á–∞—Å)**: 52% accuracy –Ω–∞ 415 —Ç—Ä–µ–∫–∞—Ö
- **–ü–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 1**: >80% accuracy (–±–∞–∑–æ–≤—ã–µ —Ñ–∏—á–∏ + –±–æ–ª—å—à–æ–π –¥–∞—Ç–∞—Å–µ—Ç)
- **–ü–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 2**: >85% accuracy (+ DJ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏—á–∏)
